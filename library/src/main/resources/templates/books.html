<!DOCTYPE html>
<html lang="pt-br" >
<head>
  <meta charset="UTF-8">
  <title>Google Books Application</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
  <link rel="stylesheet" href="books.css">
</head>
<body>

<!-- partial:index.partial.html -->
<div class="main">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h1>Busca por: <label th:utext="${nameSearch}"></label></h1>
        <label>Total de resultados: 0</label>
      </div>
    </div>
    <div class="page-content">
      <div class="col-md-12" id="page-content">
        <!-- Dinamic Content Here -->
      </div>
    </div>
  </div>
</div>
<div class="main">
  <ul id="pagination-demo" class="pagination-sm"></ul>
</div>

<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
<script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
<script src="https://npmcdn.com/bootstrap@4.0.0-alpha.5/dist/js/bootstrap.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.4.1/jquery.twbsPagination.min.js'></script>
<script th:inline="javascript">
/*<![CDATA[*/
  $('#pagination-demo').twbsPagination({
    totalPages: 6,
    visiblePages: 6,
    next: 'Próximo',
    prev: 'Anterior',
    first: 'Primeiro',
    last: 'Último',
    onPageClick: function (event, page) {
        //fetch content and render here
        let books = getBooksObjs();
        let htmlContent = getHtmlByBooks(books);
        $('#page-content').html(htmlContent);
    }
  });

  function getBooksObjs() {
    return /*[[${books}]]*/ [];
  }

  function getHtmlByBooks(books) {
    let html =
     `<div class="container">
          <div class="row">`;
            books.forEach(function(book) {
              html += getHtml(book);
            });
     html +=
          `</div>
     </div>`;

    return html;
  }

  function getHtml(book) {
    let description = getDescription(book.description);
    return `
    <div class="col-4 item-gallery">
        <div class="thumbnail">
            <img src="${book.thumbnail}">
            <div class="caption">
                <h5>${book.title}</h5>
                ${description}
            </div>
        </div>
    </div>`;
  }

  function getDescription(description) {
    if (description) {
      return `<div class="col-12 text-left">
        <h6>Descrição:</h6>
        <p>${description}</p>
      </div>`;
    }
    return '';
  }

/*]]>*/
</script>

</body>
</html>
